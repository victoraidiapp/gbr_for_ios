/*
ChocolateChip-UI
ChUI.js
Copyright 2014 Sourcebits www.sourcebits.com
License: MIT
Version: 3.5.4
*/
!function(e){"use strict";function t(e){return"tagName"in e?e:e.parentNode}function s(e,t,s,i){return Math.abs(e-t)>=Math.abs(s-i)?e-t>0?"left":"right":s-i>0?"up":"down"}function i(){if(d=null,u.last)try{u&&u.el&&(u.el.trigger("longtap"),u={})}catch(e){}}function a(){d&&clearTimeout(d),d=null}function n(){r&&clearTimeout(r),c&&clearTimeout(c),l&&clearTimeout(l),d&&clearTimeout(d),r=c=l=d=null,u={}}function o(t){function s(e){return/m/.test(e)?parseFloat(e):/s/.test(e)?100*parseFloat(e):void 0}var i,a;"transition"in document.body.style?i="transition-duration":"-webkit-transition"in document.body.style&&(i="-webkit-transition-duration"),a=s(e("article").eq(0).css(i)),setTimeout(function(){e(t).trigger({type:"navigationend"})},a)}e.extend({Uuid:function(){return Date.now().toString(36)},concat:function(e){return e instanceof Array?e.join(""):[].slice.apply(arguments).join("")},forEach:function(e,t,s){function i(e){var t=e.length,s=jQuery.type(e);return"function"===s||jQuery.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===s||0===t||"number"==typeof t&&t>0&&t-1 in e}var a,n=0,o=e.length,r=i(e);if(s){if(r)for(;o>n&&(a=t.apply(e[n],s),a!==!1);n++);else for(n in e)if(a=t.apply(e[n],s),a===!1)break}else if(r)for(;o>n&&(a=t.call(e[n],e[n],n),a!==!1);n++);else for(n in e)if(a=t.call(e[n],e[n],n),a===!1)break}}),e.fn.extend({iz:function(t){var s=e();return this.forEach(function(i){e(i).is(t)&&s.push(i)}),s},iznt:function(e){return this.not(e)},haz:function(e){return this.has(e)},haznt:function(t){var s=e();return this.forEach(function(i){e(i).has(t)[0]||s.push(i)}),s},hazClass:function(t){var s=e();return this.forEach(function(i){e(i).hasClass(t)&&s.push(i)}),s},hazntClass:function(t){var s=e();return this.forEach(function(i){e(i).hasClass(t)||s.push(i)}),s},hazAttr:function(t){var s=e();return this.forEach(function(i){e(i).attr(t)&&s.push(i)}),s},hazntAttr:function(t){var s=e();return this.forEach(function(i){e(i).attr(t)||s.push(i)}),s},forEach:function(t,s){return e.forEach(this,t,s)}}),e.extend({eventStart:null,eventEnd:null,eventMove:null,eventCancel:null,gestureLength:30}),e(function(){window.navigator.pointerEnabled?(e.eventStart="pointerdown",e.eventEnd="pointerup",e.eventMove="pointermove",e.eventCancel="pointercancel"):window.navigator.msPointerEnabled?(e.eventStart="MSPointerDown",e.eventEnd="MSPointerUp",e.eventMove="MSPointerMove",e.eventCancel="MSPointerCancel"):"ontouchstart"in window?(e.eventStart="touchstart",e.eventEnd="touchend",e.eventMove="touchmove",e.eventCancel="touchcancel"):(e.eventStart="mousedown",e.eventEnd="click",e.eventMove="mousemove",e.eventCancel="mouseout")}),e.extend({isiPhone:/iphone/gim.test(navigator.userAgent),isiPad:/ipad/gim.test(navigator.userAgent),isiPod:/ipod/gim.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/gim.test(navigator.userAgent),isAndroid:/android/gim.test(navigator.userAgent)&&!/trident/gim.test(navigator.userAgent),isWebOS:/webos/gim.test(navigator.userAgent),isBlackberry:/blackberry/gim.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/gim.test(navigator.userAgent),isWinPhone:/trident/gim.test(navigator.userAgent)&&/mobile/gim.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/msie 11/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/gim.test(navigator.userAgent),isDesktop:!/mobile/gim.test(navigator.userAgent),isSafari:!/Chrome/gim.test(navigator.userAgent)&&/Safari/gim.test(navigator.userAgent)&&!/android/gim.test(navigator.userAgent),isChrome:/Chrome/gim.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)}),/android/gim.test(navigator.userAgent)&&/webkit/gim.test(navigator.userAgent)&&!/Chrome/gim.test(navigator.userAgent)&&document.body.classList.add("isNativeAndroidBrowser"),e.extend({browserVersion:function(){var e,t=navigator.appName,s=navigator.userAgent,i=s.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!==(e=s.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"],i[1]}}),e(function(){e.body=e("body"),e.isWin?e.body.addClass("isWindows"):e.isiOS?e.body.addClass("isiOS"):e.isAndroid&&e.body.addClass("isAndroid"),e.isSafari&&6===parseInt(e.browserVersion(),10)&&e.body.addClass("isSafari6"),e.isNativeAndroid&&e.body.addClass("isNativeAndroidBrowser")});var r,l,c,d,u={},p=750,h=150;e(function(){var o,v,g=e(document.body),f=!1;g.on(e.eventStart,function(s){if(o=Date.now(),v=o-(u.last||o),s.originalEvent&&(s=s.originalEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(s.originalEvent&&!s.originalEvent.isPrimary)return}else if(!s.isPrimary)return;s=s.originalEvent?s.originalEvent:s,g.on("MSHoldVisual",function(e){e.preventDefault()}),u.el=e(t(s.target)),r&&clearTimeout(r),u.x1=s.pageX,u.y1=s.pageY,f=!1}else"mousedown"===e.eventStart?(u.el=e(t(s.target)),r&&clearTimeout(r),u.x1=s.pageX,u.y1=s.pageY,f=!1):1===s.touches.length&&(u.el=e(t(s.touches[0].target)),r&&clearTimeout(r),u.x1=s.touches[0].pageX,u.y1=s.touches[0].pageY,f=2===s.targetTouches.length?!0:!1);v>0&&250>=v&&(u.isDoubleTap=!0),u.last=o,d=setTimeout(i,p)}),g.on(e.eventMove,function(t){if(t.originalEvent&&(t=t.originalEvent),window.navigator.msPointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;t=t.originalEvent?t.originalEvent:t,a(),u.x2=t.pageX,u.y2=t.pageY}else a(),"mousemove"===e.eventMove?(u.x2=t.pageX,u.y2=t.pageY):1===t.touches.length&&(u.x2=t.touches[0].pageX,u.y2=t.touches[0].pageY);if(e.isAndroid){if(e.gestureLength=10,!u.el)return;u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){t.preventDefault(),u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+s(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(c=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):r=setTimeout(function(){return r=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},h)},0))}}),g.on(e.eventEnd,function(t){if(window.navigator.msPointerEnabled)if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;a(),u.el&&(u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+s(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(c=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):r=setTimeout(function(){return r=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},h)},0)))}),g.on("touchcancel",n)}),["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"].forEach(function(t){e.fn.extend({method:function(e){return this.on(t,e)}})}),e.extend({UIDesktopCompat:function(){e.isDesktop&&e.isSafari?e("body").addClass("isiOS").addClass("isDesktopSafari isDesktop"):e.isDesktop&&e.isChrome&&e("body").addClass("isAndroid").addClass("isDesktopChrome isDesktop")}}),e(function(){e.UIDesktopCompat()}),e(function(){e.body=e("body"),e.body[0].classList.contains("splitlayout")||e("body").prepend("<nav id='global-nav'></nav>"),e.body[0].classList.contains("splitlayout")&&window.innerWidth<768&&e("meta[name=viewport]").attr("content","width=device-width, initial-scale=0.45, maximum-scale=2, user-scalable=yes"),e("h1").each(function(e,t){t.nextElementSibling&&"A"===t.nextElementSibling.nodeName&&t.classList.add("buttonOnRight")}),e(".toolbar").prev("article").addClass("has-toolbar")}),e.extend({subscriptions:{},subscribe:function(t,s){e.subscriptions[t]||(e.subscriptions[t]=[]);var i=e.Uuid();return e.subscriptions[t].push({token:i,callback:s}),i},unsubscribe:function(t){setTimeout(function(){for(var s in e.subscriptions)if(e.subscriptions[s])for(var i=0,a=e.subscriptions[s].length;a>i;i++)if(e.subscriptions[s][i].token===t)return e.subscriptions[s].splice(i,1),t;return!1})},publish:function(t,s){return e.subscriptions[t]?(setTimeout(function(){for(var i=e.subscriptions[t]?e.subscriptions[t].length:0;i--;)e.subscriptions[t][i].callback(t,s);return!0}),!0):!1}}),e.extend({UITrackHashNavigation:function(t,s){t=t||!0,e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1],s)},UISetHashOnUrl:function(t,s){s=s||"#/";var i;i=/^#/.test(t)?s+t.split("#")[1]:s+t,e.isAndroid?(/#/.test(t)&&(t=t.split("#")[1]),/\//.test(t)&&(t=t.split("/")[1]),window.location.hash="#/"+t):window.history.replaceState("Object","Title",i)},UIGoBackToArticle:function(t){var s,i,a=e.UINavigationHistory.indexOf(t),n=e("article.current"),r=e(t);0===e.UINavigationHistory.length&&(r=e("article:first-of-type"),e.UINavigationHistory.push("#"+r[0].id));var l;l=e.UINavigationHistory.length>1?e.UINavigationHistory.splice(a+1):e("article.previous"),e.publish("chui/navigateBack/leave",n[0].id),e.publish("chui/navigateBack/enter",r[0].id),n[0].scrollTop=0,r[0].scrollTop=0,l.length&&e.each(l,function(t,s){e(s).removeClass("previous").addClass("next"),e(s).prev().removeClass("previous").addClass("next")}),s=n.next().hazClass("toolbar"),i=r.next().hazClass("toolbar"),r.removeClass("previous next").addClass("current"),r.prev().removeClass("previous next").addClass("current"),i.removeClass("previous next").addClass("current"),n.removeClass("current").addClass("next"),n.prev().removeClass("current").addClass("next"),s.removeClass("current").addClass("next"),e(".toolbar.previous").removeClass("previous").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1]),o(r)},UIGoBack:function(){var t,s,i=e.UINavigationHistory.length,a=e("article.current"),n=e(e.UINavigationHistory[i-2]);0===i&&(n=e("article:first-of-type"),e.UINavigationHistory.push("#"+n[0].id)),e.publish("chui/navigateBack/leave",a[0].id),e.publish("chui/navigateBack/enter",n[0].id),a[0].scrollTop=0,n[0].scrollTop=0,t=a.next().hazClass("toolbar"),s=n.next().hazClass("toolbar"),n.removeClass("previous").addClass("current"),n.prev().removeClass("previous").addClass("current"),s.removeClass("previous").addClass("current"),a.removeClass("current").addClass("next"),a.prev().removeClass("current").addClass("next"),t.removeClass("current").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[i-2]),1!==e.UINavigationHistory.length&&(e.UINavigationHistory.pop(),o(n))},isNavigating:!1,UIGoToArticle:function(t){if(!e.isNavigating){e.isNavigating=!0;var s=e("article.current"),i=s.prev();t=e(t);var a,n,r="#"+t[0].id,l=t.prev(),c="next previous";e.publish("chui/navigate/leave",s[0].id),e.UINavigationHistory.push(r),e.publish("chui/navigate/enter",t[0].id),s[0].scrollTop=0,t[0].scrollTop=0,a=s.next().hazClass("toolbar"),n=t.next().hazClass("toolbar"),s.removeClass("current").addClass("previous"),i.removeClass("current").addClass("previous"),a.removeClass("current").addClass("previous"),t.removeClass(c).addClass("current"),l.removeClass(c).addClass("current"),n.removeClass(c).addClass("current"),e.UISetHashOnUrl(t[0].id),setTimeout(function(){e.isNavigating=!1},500),o(t)}}}),e(function(){e.extend({UINavigationHistory:["#"+e("article").eq(0).attr("id")]}),e("nav:not(#global-nav)").each(function(t,s){e("body")[0].classList.contains("splitlayout")||s.classList.add(0===t?"current":"next")}),e("article").each(function(t,s){e("body")[0].classList.contains("splitlayout")||e("body")[0].classList.contains("slide-out-app")||s.classList.add(0===t?"current":"next")}),e("body").on("singletap","a.back",function(){this.classList.contains("back")&&e.UIGoBack()}),e("body").on("singletap doubletap","li",function(){var t=e(this);if(!e.isNavigating&&this.hasAttribute("data-goto")&&this.getAttribute("data-goto")&&document.getElementById(this.getAttribute("data-goto"))&&!e(this).parent()[0].classList.contains("deletable")){e(s).addClass("navigable"),t.addClass("selected");var s="#"+this.getAttribute("data-goto");setTimeout(function(){t.removeClass("selected")},500);var i=e(s);e.UIGoToArticle(i)}}),e("li[data-goto]").each(function(t,s){e(s).closest("article").addClass("navigable");var i="#"+s.getAttribute("data-goto");e(i).addClass("navigable")}),e("article").eq(1)[0]&&e.UISetHashOnUrl(e("article").eq(0)[0].id),e("nav").on(e.eventStart,function(e){e.preventDefault()})}),e(function(){e("body").on("singletap",".button",function(){var t=e(this);t.parent(".segmented")[0]||t.parent(".tabbar")[0]||(t.addClass("selected"),setTimeout(function(){t.removeClass("selected")},500))})}),e.fn.extend({UIBlock:function(t){return t=t?" style='opacity:"+t+"'":" style='opacity: .5;'",e(this).before("<div class='mask'"+t+"></div>"),e("article.current").attr("aria-hidden",!0),this},UIUnblock:function(){return e(".mask").remove(),e("article.current").removeAttr("aria-hidden"),this}}),e.fn.extend({UICenter:function(){if(this[0]){var t,s=e(this),i=s.parent();t="absolute"!==s.css("position")?"relative":"absolute";var a,n,o,r;"absolute"===t?(a=s[0].clientHeight,n=s[0].clientWidth,o=i[0].clientHeight,r=i[0].clientWidth):(a=parseInt(s.css("height"),10),n=parseInt(s.css("width"),10),o=parseInt(i.css("height"),10),r=parseInt(i.css("width"),10));var l,c;"body"===i[0].nodeName?(l=window.innerHeight/2+window.pageYOffset-a/2+"px",c=window.innerWidth/2-n/2+"px"):(l=o/2-a/2+"px",c=r/2-n/2+"px"),"absolute"!==t&&(c=0),s.css({left:c,top:l})}}}),e.fn.extend({UIBusy:function(t){t=t||{};var s,i=this,a=t.color||"#000",n=t.size||"80px",o=t&&"right"===t.position?"align-flush":null,r=t.duration||"2s",l=function(){var t={"-webkit-animation-duration":r};return s=e('<span class="busy"></span>'),e(s).css({"background-color":a,height:n,width:n}),e(s).css(t),e(s).attr("role","progressbar"),o&&e(s).addClass(o),i.append(s),this},c=function(){var t={"-webkit-animation-duration":r};return s=e('<div class="busy"><div></div><div></div></div>'),e(s).css({height:n,width:n,"background-image":"url(\"data:image/svg+xml;utf8,<svg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='400px' height='400px' viewBox='0 0 400 400' enable-background='new 0 0 400 400' xml:space='preserve'><circle fill='none' stroke='"+a+"' stroke-width='20' stroke-miterlimit='10' cx='199' cy='199' r='174'/></svg>\")"}),e(s).css(t),e(s).attr("role","progressbar"),e(s).innerHTML="<div></div><div></div>",o&&e(s).addClass("align-"+o),i.append(s),this},d=function(){return s=e('<progress class="busy"></progress>'),e(s).css({color:a}),e(s).attr("role","progressbar"),e(s).addClass("win-ring"),o&&e(s).addClass("align-"+o),i.append(s),this};e.isWin?d(t):e.isAndroid||e.isChrome?c(t):(e.isiOS||e.isSafari)&&l(t)}}),e.extend({UIPopup:function(t){if(t){var s,i,a=t.id||e.Uuid(),n=t.title?"<header><h1>"+t.title+"</h1></header>":"",o=t.message?'<p role="note">'+t.message+"</p>":"",r=t.cancelButton?'<a href="javascript:void(null)" class="button cancel" role="button">'+t.cancelButton+"</a>":"",l=t.continueButton?'<a href="javascript:void(null)" class="button continue" role="button">'+t.continueButton+"</a>":"",c=t.callback||e.noop,d=t.empty?' style="padding: 40px 0;" ':"";t.empty?(s="",i=""):(s='<div class="panel">',i="</div>");var u='<div class="popup closed" role="alertdialog" id="'+a+'"'+d+">"+s+n+o+"<footer>"+r+l+"</footer>"+i+"</div>";e("body").append(u),c&&l&&e(".popup").find(".continue").on(e.eventStart,function(){e(".popup").UIPopupClose(),c.call(c)}),e.UICenterPopup(),setTimeout(function(){e("body").find(".popup").removeClass("closed")},200),e("body").find(".popup").UIBlock("0.5");var p=e.eventStart+" singletap "+e.eventEnd;e(".mask").on(p,function(e){e.stopPropagation()})}},UICenterPopup:function(){var t=e(".popup");if(t[0]){var s,i=window.innerHeight/2+window.pageYOffset-t[0].clientHeight/2+"px";s=320===window.innerWidth?"10px":Math.floor((window.innerWidth-318)/2)+"px",t.css(e.isWin?{top:i}:{left:s,top:i})}}}),e.fn.extend({UIPopupClose:function(){(this||this.classList.contains("popup"))&&(e(this).UIUnblock(),e(this).remove())}}),e(function(){e("body").on(e.eventStart,".cancel",function(){e(this).closest(".popup")[0]&&e(this).closest(".popup").UIPopupClose()}),window.onresize=function(){e.UICenterPopup()}}),e.fn.extend({UIPopover:function(t){if(!t)return[];var s,i=e(this);this[0].id?s=this[0].id:(s=e.Uuid(),i.attr("id",s));var a=t.id?t.id:e.Uuid(),n=t.title?"<header><h1>"+t.title+"</h1></header>":"",o=t.callback?t.callback:e.noop,r='<div class="popover" id="'+a+'">'+n+"<section></section></div>",l=function(t){var s,i,a=e(t).offset(),n=a.left,o=e(".popover"),r=o.offset();s=r.left,i=a.top+e(t)[0].clientHeight,o.css(o.width()+a.left>window.innerWidth?{left:window.innerWidth-o.width()-20+"px",top:i+20+"px"}:{left:n+"px",top:i+20+"px"})};e(this).on(e.eventStart,function(){if(e(".mask")[0])return e.UIPopoverClose(),void e("body").UIUnblock();var t=this;e(this).addClass("selected"),setTimeout(function(){e(t).removeClass("selected")},1e3),e("body").append(r),e(".popover").UIBlock(".5");var i="singletap";e.isWin&&e.isDesktop&&(i=e.eventStart+" singletap "+e.eventEnd),e(".mask").on(i,function(e){e.preventDefault(),e.stopPropagation()}),e(".popover").data("triggerEl",s),e.isWin?(l(t),e(".popover").addClass("open")):(e(".popover").addClass("open"),setTimeout(function(){l(t)})),o.call(o,t)})}}),e.extend({UIAlignPopover:function(){var t=e(".popover");if(t.length){var s=t.data("triggerEl"),i=e("#"+s).offset(),a=i.left;t.css(e(t).width()+i.left>window.innerWidth?{left:window.innerWidth-e(t).width()-20+"px"}:{left:a+"px"})}}}),e.extend({UIPopoverClose:function(){e("body").UIUnblock(),e(".popover").css("visibility","hidden"),setTimeout(function(){e(".popover").remove()},10)}}),e(function(){window.onresize=function(){e.UIAlignPopover()};var t=e.eventStart+" singletap "+e.eventEnd;e("body").on(t,".mask",function(t){if(e(".popover")[0])e.UIPopoverClose();else{if(t&&1===t.nodeType)return;t.stopPropogation()}})}),e.fn.extend({UISegmented:function(t){if(!this.hasClass("paging")){var s,i=t&&t.callback?t.callback:e.noop;t&&t.selected&&(s=t.selected),t&&t.callback&&(i=t.callback),this.find("a").each(function(t,i){e(i).find("a").attr("role","radio"),0===s&&0===t&&(i.setAttribute("aria-checked","true"),i.classList.add("selected")),t===s&&(i.setAttribute("aria-checked","true"),i.classList.add("selected"))}),s||this.find(".selected")[0]||this.children().eq(0).addClass("selected"),this.on("singletap",".button",function(t){var s=e(this);this.parentNode.classList.contains("paging")||(s.siblings("a").removeClass("selected"),s.siblings("a").removeAttr("aria-checked"),s.addClass("selected"),s.attr("aria-checked",!0),i.call(this,t))})}}}),e.extend({UICreateSegmented:function(e){var t=e&&e.className?e.className:"",s=e&&e.labels?e.labels:[],i=e&&e.selected?e.selected:0,a=['<div class="segmented'];return t&&a.push(" "+t),a.push('">'),s.forEach(function(e,t){a.push('<a role="radio" class="button'),a.push(i===t?' selected" aria-checked="true"':'"'),a.push(">"),a.push(e),a.push("</a>")}),a.push("</div>"),a.join("")}}),e(function(){e(".segmented").UISegmented()}),e.fn.extend({UIPanelToggle:function(t,s){var i,a=0;a=this.children().hazClass("selected").index()||0,t instanceof Array?i=t.children("div"):"string"==typeof t&&(i=e(t).children("div")),i.eq(a).siblings().css({display:"none"}),s&&s.apply(this,arguments),this.on(e.eventEnd,"a",function(){i.eq(e(this).index()).css({display:"block"}).siblings().css("display","none")}),this.on("singletap",".button",function(){var t=e(this);this.parentNode.classList.contains("paging")||(t.siblings("a").removeClass("selected"),t.siblings("a").removeAttr("aria-checked"),t.addClass("selected"),t.attr("aria-checked",!0))})}}),e.extend({UIPaging:function(){var t=e(".segmented.paging").closest("nav").next();window&&window.jQuery&&e===window.jQuery?e(".segmented.paging").hasClass("horizontal")?t.addClass("horizontal"):e(".segmented.paging").hasClass("vertical")&&t.addClass("vertical"):e(".segmented.paging").hasClass("horizontal")[0]?t.addClass("horizontal"):e(".segmented.paging").hasClass("vertical")[0]&&t.addClass("vertical"),t.children().eq(0).addClass("current"),t.children().eq(0).siblings().addClass("next");var s=function(){return t.children().length};e(".segmented.paging").on(e.eventStart,".button:first-of-type",function(){if(1!==s()){var i=e(this);i.next().removeClass("selected"),i.addClass("selected");var a;a=e("section.current"),0===a.index()?(a.removeClass("current"),t.children().eq(s()-1).addClass("current").removeClass("next"),t.children().eq(s()-1).siblings().removeClass("next").addClass("previous")):(a.removeClass("current").addClass("next"),a.prev().removeClass("previous").addClass("current")),setTimeout(function(){i.removeClass("selected")},250)}}),e(".segmented.paging").on(e.eventStart,".button:last-of-type",function(){if(1!==s()){var i=e(this);i.prev().removeClass("selected"),i.addClass("selected");var a;this.classList.contains("disabled")||(a=e("section.current"),a.index()===s()-1?(a.removeClass("current"),t.children().eq(0).addClass("current").removeClass("previous"),t.children().eq(0).siblings().removeClass("previous").addClass("next")):(a.removeClass("current").addClass("previous"),a.next().removeClass("next").addClass("current")),setTimeout(function(){i.removeClass("selected")},250))}})}}),e.extend({UIDeletable:function(t){if(t&&t.list&&!(!t instanceof Array)){var s,i,a,n,o=e(t.list),r=t.editLabel||"Edit",l=t.doneLabel||"Done",c=t.deleteLabel||"Delete",d=t.placement||"right",u=t.callback||e.noop,p="swiperight";"rtl"===e("html").attr("dir")&&(p="swipeleft"),e.isWin&&(c="");{e("li").eq(1)[0].clientHeight}s=e.concat('<a href="javascript:void(null)" class="button delete">',c,"</a>"),i=e.concat('<a href="javascript:void(null)" class="button edit">',r,"</a>"),a='<span class="deletion-indicator"></span>',"left"===d?o[0].classList.contains("deletable")||o.closest("article").prev().prepend(i):o[0].classList.contains("deletable")||(o.closest("article").prev().append(i),o.closest("article").prev().find("h1").addClass("buttonOnRight"),o.closest("article").prev().find(".edit").addClass("align-flush"),n=o.closest("article").prev().find(".edit")),o.find("li").each(function(t,i){e(i).has(".deletion-indicator")[0]||(e(i).prepend(a),e(i).append(s))}),o.addClass("deletable");var h=function(t,s,i){var a;e.isiOS?a="100px":e.isAndroid&&(a="140px"),e(function(){i.on("singletap",function(){var t=this;this.classList.contains("edit")?setTimeout(function(){t.classList.remove("edit"),t.classList.add("done"),e(t).text(l),e(s).addClass("showIndicators")}):this.classList.contains("done")&&setTimeout(function(){t.classList.remove("done"),t.classList.add("edit"),e(t).text(r),e(s).removeClass("showIndicators"),e(s).find("li").removeClass("selected")})}),e(s).on("singletap",".deletion-indicator",function(){return e(this).parent("li").hasClass("selected")?void e(this).parent("li").removeClass("selected"):void e(this).parent("li").addClass("selected")}),(e.isiOS||e.isSafari)&&e(s).on(p,"li",function(){e(this).removeClass("selected")}),e(s).on("singletap",".delete",function(){var s=this,i="-1000%";"rtl"===e("html").attr("dir")&&(i="1000%"),e(this).siblings().css({"-webkit-transform":"translate3d("+i+",0,0)","-webkit-transition":"all 1s ease-out"}),setTimeout(function(){t.call(t,s),e(s).parent().remove()},500)})})};return h(u,o,n)}}}),e.fn.extend({UISelectList:function(t){var s=t&&t.name?t.name:e.Uuid(),i=this[0];return i&&!e(i).hasClass("select")&&this.addClass("select"),i?(i.classList.add("select"),e(i).find("li").forEach(function(i,a){var n=null!==i.getAttribute("data-select-value")?i.getAttribute("data-select-value"):"";i.setAttribute("role","radio"),t&&t.selected===a?(i.setAttribute("aria-checked","true"),i.classList.add("selected"),e(i).find("input")[0]?e(i).find("input").prop("checked",!0).attr("value",n):e(i).append('<input type="radio" checked="checked" name="'+s+'" value="'+n+'">')):e(i).find("input")[0]||e(i).append('<input type="radio" name="'+s+'" value="'+n+'">')}),void e(i).on("singletap","li",function(){var s=this;e(s).siblings("li").removeClass("selected"),e(s).siblings("li").removeAttr("aria-checked"),e(s).siblings("li").find("input").removeAttr("checked"),e(s).addClass("selected"),s.setAttribute("aria-checked",!0),e(s).find("input").prop("checked",!0),t&&t.callback&&t.callback.apply(this,arguments)})):[]}}),e.extend({UISheet:function(t){var s=e.Uuid(),i="",a="";t&&(s=t.id?t.id:s,i=t.listClass?" "+t.listClass:"",a=' style="background-color:'+t.background+';" '||"");var n='<div id="'+s+'" class="sheet'+i+'"><div class="handle"></div><section class="scroller-vertical"></section></div>';e("body").append(n),e(".sheet .handle").on(e.eventStart,function(){e.UIHideSheet()})},UIShowSheet:function(){e("article.current").addClass("blurred"),e.isAndroid||e.isChrome?(e(".sheet").css("display","block"),setTimeout(function(){e(".sheet").addClass("opened")},20)):e(".sheet").addClass("opened")},UIHideSheet:function(){e(".sheet").removeClass("opened"),e("article.current").addClass("removeBlurSlow"),setTimeout(function(){e("article").removeClass("blurred"),e("article").removeClass("removeBlurSlow")},500)}}),e.extend({UISlideout:function(t){var s=e("<a class='button slide-out-button' href='javascript:void(null)'></a>"),i='<div class="slide-out"><section></section></div>';e("article").removeClass("next"),e("article").removeClass("current"),e("article").prev().removeClass("next"),e("article").prev().removeClass("current"),t=t||"left",e("body").append(i),e("body").addClass("slide-out-app"),e("article:first-of-type").addClass("show"),e("article:first-of-type").prev().addClass("show"),e("#global-nav").append(s),e(".slide-out-button").on(e.eventStart,function(){e(".slide-out").toggleClass("open")}),e(".slide-out").on("singletap","li",function(){var t="#"+e(this).attr("data-show-article");e.UINavigationHistory[0]=t,e.UISetHashOnUrl(t),e.publish("chui/navigate/leave",e("article.show")[0].id),e.publish("chui/navigate/enter",t),e(".slide-out").removeClass("open"),e("article").removeClass("show"),e("article").prev().removeClass("show"),e(t).addClass("show"),e(t).prev().addClass("show")})}}),e.extend(e.UISlideout,{populate:function(t){var s=e(".slide-out");if(s[0]&&e.isArray(t)){s.find("section").append('<ul class="list"></ul>');var i=s.find("ul");t.forEach(function(e){for(var t in e)i.append("header"===t?'<li class="slideout-header"><h2>'+e[t]+"</h2></li>":'<li data-show-article="'+t+'"><h3>'+e[t]+"</h3></li>")})}}}),e.fn.extend({UIStepper:function(t){if(!t)return[];if(!t.start)return[];if(!t.end)return[];var s=e(this),i=t.start,a=t.end,n=t.defaultValue?t.defaultValue:t.start,o="+",r="-";e.isWin&&(o="",r="");var l='<a href="javascript:void(null)" class="button decrease">'+r+"</a>",c="<label>"+n+'</label><input type="text" value="'+n+'">',d='<a href="javascript:void(null)" class="button increase">'+o+"</a>";s.append(l+c+d),s.data("ui-value",{start:i,end:a,defaultValue:n});var u=function(){var t,i=s.find("input").val(),a=s.data("ui-value"),n=a.start;n>=i?e(this).addClass("disabled"):(t=Number(i)-1,s.find(".button:last-of-type").removeClass("disabled"),s.find("label").text(t),s.find("input")[0].value=t,i===n&&e(this).addClass("disabled"))},p=function(){var t,i=s.find("input").val(),a=s.data("ui-value"),n=a.end;i>=n?e(this).addClass("disabled"):(t=Number(i)+1,s.find(".button:first-of-type").removeClass("disabled"),s.find("label").text(t),s.find("input")[0].value=t,i===n&&e(this).addClass("disabled"))};s.find(".button:first-of-type").on("singletap",function(){u.call(this,s)}),s.find(".button:last-of-type").on("singletap",function(){p.call(this,s)})}}),e.extend({UIResetStepper:function(e){var t=e.data("ui-value").defaultValue;e.find("label").html(t),e.find("input")[0].value=t}}),e.fn.extend({UISwitch:function(){var t=!1;this.forEach(function(s){s.setAttribute("role","checkbox"),e(s).data("ui-setup")!==!0&&(s.querySelector("input")||s.insertAdjacentHTML("afterBegin",'<input type="checkbox">'),s.classList.contains("on")&&s.querySelector("input").setAttribute("checked","checked"),s.querySelector("em")&&(t=!0),t||s.insertAdjacentHTML("afterBegin","<em></em>"),e(s).on("singletap",function(){var e=s.querySelector("input");s.classList.contains("on")?(s.classList.remove("on"),s.removeAttribute("aria-checked"),e.removeAttribute("checked")):(s.classList.add("on"),e.setAttribute("checked","checked"),s.setAttribute("aria-checked",!0))}),e(s).on("swipeleft",function(){var e=s.querySelector("input");s.classList.contains("on")&&(s.classList.remove("on"),s.removeAttribute("aria-checked"),e.removeAttribute("checked"))}),e(s).on("swiperight",function(){var e=s.querySelector("input");s.classList.contains("on")||(s.classList.add("on"),e.setAttribute("checked","checked"),s.setAttribute("aria-checked",!0))}),e(s).data("ui-setup",!0))})}}),e.extend({UICreateSwitch:function(t){var s=t?t.id:e.Uuid(),i=t&&t.name?' name="'+t.name+'"':"",a=t&&t.value?' value="'+t.value+'"':"",n=t&&"on"===t.state?" "+t.state:"",o=t&&"on"===t.state?' checked="checked"':"",r=e.concat('<span class="switch',n,'" id="',s,'"><em></em>','<input type="checkbox"',i,o,a,"></span>");return e(r)}}),e(function(){e(".switch").UISwitch()}),document.addEventListener("touchstart",function(e){var t=e.target,s=0;for(s=0;10>s;s+=1)null!==t&&(void 0!==t.className&&t.className.match("navigable")&&(0===t.scrollTop?t.scrollTop=1:t.scrollTop+t.offsetHeight===t.scrollHeight&&(t.scrollTop=t.scrollTop-1)),t=t.parentNode)}),e.extend({UITabbar:function(t){if(t){e("body").addClass("hasTabBar"),e.isiOS6&&e("body").addClass("isiOS6");for(var s=t.id||e.Uuid(),i=t.selected||"",a='<div class="tabbar" id="'+s+'">',n=e.isiOS||e.isSafari?'<span class="icon"></span>':"",o=0;o<t.tabs;o++)a+='<a class="button '+t.icons[o],i===o+1&&(a+=" selected"),a+='">'+n+"<label>"+t.labels[o]+"</label></a>";a+="</div>",e("body").append(a),e("nav").removeClass("current").addClass("next"),e("nav").eq(i).removeClass("next").addClass("current"),e("article").removeClass("current").addClass("next"),e("article").eq(i-1).removeClass("next").addClass("current"),e("body").find(".tabbar").on("singletap",".button",function(){var t,s,i=this;e.publish("chui/navigate/leave",e("article.current")[0].id),i.classList.add("selected"),e(this).siblings("a").removeClass("selected"),t=e(this).index(),e("article.previous").removeClass("previous").addClass("next"),e("nav.previous").removeClass("previous").addClass("next"),e("article.current").removeClass("current").addClass("next"),e("nav.current").removeClass("current").addClass("next"),s=e("article").eq(t)[0].id,e.publish("chui/navigate/enter",s),window&&window.jQuery?e("article").each(function(t,s){e(s).scrollTop(0)}):e("article").eq(t).siblings("article").forEach(function(e){e.scrollTop=0}),e.UISetHashOnUrl("#"+s),e.UINavigationHistory[0]==="#"+s?e.UINavigationHistory=[e.UINavigationHistory[0]]:1===e.UINavigationHistory.length?e.UINavigationHistory[0]!=="#"+s&&e.UINavigationHistory.push("#"+s):3===e.UINavigationHistory.length?e.UINavigationHistory.pop():e.UINavigationHistory[1]="#"+s,e("article").eq(t).removeClass("next").addClass("current"),e("nav").eq(t+1).removeClass("next").addClass("current")})}}}),e.extend({templates:{},template:function(e,t){var s;t=t||"data",s=/\[\[=([\s\S]+?)\]\]/g;var i=new Function(t,"var p=[];p.push('"+e.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(s,"',$1,'").split("[[").join("');").split("]]").join("p.push('")+"');return p.join('');");return i}}),e.extend({UISearch:function(t){var s=t&&t.articleId||e("article").eq(0),i=t&&t.id||e.Uuid(),a=t&&t.placeholder||"search",n=t&&t.results||1,o='<div class="searchBar"><input placeholder="'+a+'" type="search" results="'+n+'" id="'+i+'"></div>';
e(s).find("section").prepend(o),e.isWin&&(e(s).prev().append(o),e("#"+i).parent().append('<span class="searchGlyph">&#xe11A;</span>'))}}),e(function(){var t=function(){function t(e){return""===i?e:(e=e.charAt(0).toUpperCase()+e.substr(1),i+e)}var s=document.createElement("div").style,i=function(){for(var e,t="t,webkitT".split(","),i=t.length,a=0;i>a;a++)if(e=t[a]+"ransform",e in s)return t[a].substr(0,t[a].length-1);return!1}(),a=i?"-"+i.toLowerCase()+"-":"",n=t("transform"),o=t("transitionDuration"),r="ontouchstart"in window,l=e.eventStart,c=e.eventMove,d=e.eventEnd,u=e.eventCancel,p=function(){if(i===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd"};return e[i]}(),h=function(t){var s,i,n;this.wrapper="string"==typeof t.target?document.querySelector(t.target):t.target,this.options={panels:t.panels||3,snapThreshold:null,loop:t.loop||!0},e.isRTL&&(t.loop=!0);for(var o in t)this.options[o]=t[o];this.wrapper.style.overflow="hidden",this.wrapper.style.position="relative",this.carouselPanels=[],s=document.createElement("ul"),s.className="carousel-track",s.style.cssText="position:relative;top:0;height:100%;width:100%;"+a+"transition-duration:0;"+a+"transform:translateZ(0);"+a+"transition-timing-function:ease-out",this.wrapper.appendChild(s),this.track=s,this.refreshSize();for(var r,u=-1;2>u;u++)i=document.createElement("li"),i.id="carousel-panel-"+(u+1),i.style.cssText=a+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+100*u+"%",r=-1===u?this.options.panels-1:u,e(i).data("upcomingPanelIndex",r),this.options.loop||-1!==u||(i.style.visibility="hidden"),this.track.appendChild(i),this.carouselPanels.push(i);n=this.carouselPanels[1].className,this.carouselPanels[1].className=n?n+" carousel-panel-active":"carousel-panel-active",this.wrapper.addEventListener(l,this,!1),this.wrapper.addEventListener(c,this,!1),this.wrapper.addEventListener(d,this,!1),this.track.addEventListener(p,this,!1);var h;if(t.pagination){h=document.createElement("ul"),h.className="pagination";for(var v=0;v<t.panels.length;v++)i=document.createElement("li"),0===v&&(i.className="selected"),h.appendChild(i);e(this.wrapper).after(h)}};return h.prototype={currentPanel:1,x:0,panel:0,customEvents:[],onSlide:function(e){this.wrapper.addEventListener("carousel-panel-move",e,!1),this.customEvents.push(["move",e])},destroy:function(){for(;this.customEvents.length;)this.wrapper.removeEventListener("carousel-panel-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();this.wrapper.removeEventListener(l,this,!1),this.wrapper.removeEventListener(c,this,!1),this.wrapper.removeEventListener(d,this,!1),this.track.removeEventListener(p,this,!1)},refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.panelWidth=this.wrapperWidth,this.maxX=-this.options.panels*this.panelWidth+this.wrapperWidth,this.snapThreshold=null===this.options.snapThreshold?Math.round(.15*this.panelWidth):/%/.test(this.options.snapThreshold)?Math.round(this.panelWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePanelCount:function(e){this.options.panels=e,this.maxX=-this.options.panels*this.panelWidth+this.wrapperWidth},goToPanel:function(t){this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className.replace(/(^|\s)carousel-panel-active(\s|$)/,""),t=0>t?0:t>this.options.panels-1?this.options.panels-1:t,this.panel=t,this.track.style[o]="0s",this.getPosition(-t*this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className+" carousel-panel-active",0===this.currentPanel?(this.carouselPanels[2].style.left=100*this.panel-100+"%",this.carouselPanels[0].style.left=100*this.panel+"%",this.carouselPanels[1].style.left=100*this.panel+100+"%",e(this.carouselPanels[2]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):1===this.currentPanel?(this.carouselPanels[0].style.left=100*this.panel-100+"%",this.carouselPanels[1].style.left=100*this.panel+"%",this.carouselPanels[2].style.left=100*this.panel+100+"%",e(this.carouselPanels[0]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):(this.carouselPanels[1].style.left=100*this.panel-100+"%",this.carouselPanels[2].style.left=100*this.panel+"%",this.carouselPanels[0].style.left=100*this.panel+100+"%",e(this.carouselPanels[1]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)),this.slide()},handleEvent:function(e){switch(e.type){case l:this.start(e);break;case c:this.move(e);break;case u:case d:this.end(e)}},getPosition:function(e){this.x=e,this.track.style[n]="translate("+e+"px,0) translateZ(0)"},resize:function(){this.refreshSize(),this.track.style[o]="0s",this.getPosition(-this.panel*this.panelWidth)},start:function(e){if(!this.initiated){var t=r?e.touches[0]:e;this.initiated=!0,this.moved=!1,this.thresholdExceeded=!1,this.startX=t.pageX,this.startY=t.pageY,this.pointX=t.pageX,this.pointY=t.pageY,this.stepsX=0,this.stepsY=0,this.directionX=0,this.directionLocked=!1,this.track.style[o]="0s",this.event("touchstart")}},move:function(e){if(this.initiated){{var t=r?e.touches[0]:e,s=t.pageX-this.pointX,i=t.pageY-this.pointY,a=this.x+s;Math.abs(t.pageX-this.startX)}if(this.moved=!0,this.pointX=t.pageX,this.pointY=t.pageY,this.directionX=s>0?1:0>s?-1:0,this.stepsX+=Math.abs(s),this.stepsY+=Math.abs(i),!(this.stepsX<10&&this.stepsY<10)){if(!this.directionLocked&&this.stepsY>this.stepsX)return void(this.initiated=!1);e.preventDefault(),this.directionLocked=!0,!this.options.loop&&(a>0||a<this.maxX)&&(a=this.x+s/2),this.getPosition(a)}}},end:function(e){if(this.initiated){var t=r?e.changedTouches[0]:e,s=Math.abs(t.pageX-this.startX);if(this.initiated=!1,this.moved)return!this.options.loop&&(this.x>0||this.x<this.maxX)&&(s=0),s<this.snapThreshold?(this.track.style[o]=Math.floor(300*s/this.snapThreshold)+"ms",void this.getPosition(-this.panel*this.panelWidth)):void this.checkPosition()}},checkPosition:function(){var t,s,i;this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className.replace(/(^|\s)carousel-panel-active(\s|$)/,""),this.directionX>0?(this.panel=-Math.ceil(this.x/this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),t=this.currentPanel-1,t=0>t?2:t,this.carouselPanels[t].style.left=100*this.panel-100+"%",s=this.panel-1):(this.panel=-Math.floor(this.x/this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),t=this.currentPanel+1,t=t>2?0:t,this.carouselPanels[t].style.left=100*this.panel+100+"%",s=this.panel+1),i=this.carouselPanels[this.currentPanel].className,/(^|\s)carousel-panel-active(\s|$)/.test(i)||(this.carouselPanels[this.currentPanel].className=i?i+" carousel-panel-active":"carousel-panel-active"),i=this.carouselPanels[t].className,s-=Math.floor(s/this.options.panels)*this.options.panels,e(this.carouselPanels[t]).data("upcomingPanelIndex",s);var a=-this.panel*this.panelWidth;this.track.style[o]=Math.floor(500*Math.abs(this.x-a)/this.panelWidth)+"ms",this.options.loop||(this.carouselPanels[t].style.visibility=0===a||a===this.maxX?"hidden":""),this.x===a?this.slide():(this.getPosition(a),this.slide())},slide:function(){this.event("move")},event:function(e){var t=document.createEvent("Event");t.initEvent("carousel-panel-"+e,!0,!0),this.wrapper.dispatchEvent(t)}},h}();e.extend({UISetupCarousel:function(s){function i(e){var t=e.shift(0);return e.reverse(),e.unshift(t),e}if(s){s.loop=s.loop||!1;var a=new t({target:s.target,panels:s.panels.length,loop:s.loop,pagination:s.pagination});e(s.target).data("carousel",a),e.isRTL&&(s.panels=i(s.panels));for(var n,o=0;3>o;o++)n=0===o?s.panels.length-1:o-1,a.carouselPanels[o].innerHTML=s.panels[n];var r=0,l=e(s.target).next(".pagination");a.onSlide(function(){for(var t=0;3>t;t++){var i=e(a.carouselPanels[t]).data("upcomingPanelIndex");a.carouselPanels[t].innerHTML=s.panels[i]}r=e(".carousel-panel-active").data("upcomingPanelIndex"),l.find("li").removeClass("selected"),e.isRTL?(l.find("li").removeClass("selected"),1>r?l.find("li").eq(0).addClass("selected"):l.find("li").eq(s.panels.length-r).addClass("selected")):l.find("li").eq(r).addClass("selected")}),e(s.target).on("mousedown","img",function(){return!1});var c=e(s.target).width();l.width(c),l.on("click","li",function(){e(this).siblings("li").removeClass("selected"),e(this).addClass("selected");var t=0;if(e.isRTL){var s=e(this).parent().children("li").length;0===e(this).index()?a.goToPanel(0):(t=s-e(this).index(),a.goToPanel(t)),e(this).siblings("li").removeClass("selected"),e(this).addClass("selected")}else a.goToPanel(0===e(this).index()?0:e(this).index())})}}})}),e.fn.extend({UIRange:function(){if(!e.isWin&&"INPUT"===this.nodeName){var t,s=e(this),i=s.width(),a=(s.val()-s.attr("min"))/(s.attr("max")-s.attr("min")),n=-1.3;0>a?t=0:a>1?t=i:(t=i*a+n,n-=a),s.css({"background-size":Math.round(t)+"px 10px"})}}}),e(function(){e("input[type=range]").each(function(t,s){e(s).UIRange()}),e("body").on("input","input[type=range]",function(){e(this).UIRange()})})}(window.jQuery);